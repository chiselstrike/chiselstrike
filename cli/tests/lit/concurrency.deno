# SPDX-FileCopyrightText: Â© 2022 ChiselStrike <info@chiselstrike.com>

# RUN: sh -e @file

cp examples/person.ts "$TEMPDIR/models"
cp examples/store.js "$TEMPDIR/endpoints"

cd "$TEMPDIR"

$CHISEL apply

# CHECK: Model defined: Person
# CHECK: End point defined: /dev/store

for i in $(seq 1 100); do
  $CURL --data '{
      "first_name":"Glauber",
      "last_name":"Costa",
      "age": 666,
      "human": true,
      "height": 10.01
  }' -o - $CHISELD_HOST/dev/store &
done

# CHECK: ok

wait
