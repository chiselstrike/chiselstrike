# SPDX-FileCopyrightText: Â© 2021 ChiselStrike <info@chiselstrike.com>

# RUN: CURL="@curl" sh -e @file

cat << EOF | $CHISEL type import -
type Foo { a: String }
type Bar { a: String }
EOF

# CHECK: Type defined: Foo
# CHECK: Type defined: Bar

$CHISEL restart
$CHISEL type export

# CHECK: class Bar {
# CHECK:   [[^ *a: String]]
# CHECK: }
# CHECK: class Foo {
# CHECK:   [[^ *a: String]]
# CHECK: }

set +e
cat << EOF | $CHISEL type import - 2>&1
type Zed { a: String, a: String }
EOF
set -e

# CHECK: UNIQUE constraint failed: field_names.field_name
